---
title: Node代码段
tags:
  - 代码段
  - NodeJS
folder:
  - 待分类
abbrlink: 577cce0f
category:
  - 速查表
date: 2018-07-03 13:13:07
---


******

<!-- more -->

# NodeJS代码段记录

名称 | 简介 | 备注
---|----|---
<a href='#createfile'>创建目录</a> | 根据格式化对象创建目录文件

## 详情

1. <span id='createfile'>创建目录</span>

    ```js
        const fs = require('fs'),
            path = require('path'),
            baseurl = __dirname ;

        console.log(baseurl);

        var pathinfor = {
            floder: 'mo-SinglePage',
            son: [{
                floder: 'c',
                file: 'c.js',
                son: [{
                    floder: 'e',
                    file: 'e.js',
                },{
                    floder: 'd',
                    file: 'd.js',
                }]
            }]
        };

        function createFile (str) {
            if (typeof str != 'string') return;
            fs.mkdirSync(str);
        }

        function createDir (path) {
            if (!fs.existsSync(path)) {
                fs.mkdirSync(path);
            }
            
        };

        function createFile (path, test) {
            if (!fs.existsSync(path)) {
                fs.mkdirSync(path);
            }
            if (!fs.existsSync(path + '\\' + test)) {
                fs.writeFile(path + '\\' + test, test, function(err) {
                    if(err) {
                        return console.log(err);
                    }
                });
            }
        };

        function run (obj, baseUrl) {
            let path = baseUrl;
            for (const k in obj) {
                if (obj.hasOwnProperty(k)) {
                    const v = obj[k];
                    if (k == 'floder') {
                        path = path + '\\'+ v;
                        createDir(path);
                    }
                    if (k == 'file') {
                        if (typeof v == 'string') {
                            createFile(path, v)
                        }
                        if (Array.isArray(v)) {
                            for (let i = 0; i < v.length; i++) {
                                let f = v[i];                      
                                createFile(path, f);
                            }
                        }
                    }
                    if (k == 'son') {
                        if (typeof v != 'object') return;
                        
                        if (Array.isArray(v)) {
                            for (let i = 0; i < v.length; i++) {
                                let f = v[i];  
                                run (f, path)
                            }
                        } else {
                            run (v, path)
                        }
                    }
                }
            }
        }

        run (pathinfor, baseurl)
    ```