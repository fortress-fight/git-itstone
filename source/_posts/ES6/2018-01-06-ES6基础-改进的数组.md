---
title: ES6基础-改进的数组
tags:
    - javascript
    - es6
    - 前端
categories:
    - ECMAScript6
folder: es6
abbrlink: 5ab4532
date: 2018-01-06 23:48:28
photos: /xmind/ES6/ES6基础-数组.png
---

---

<!-- more -->

# ES6 基础 -- 改进的数组

ECMAScript 2015 新增了一些有关数组的方法；

## 新增方法

### Array 构造对象新增方法

1. Array.of

    我们知道，我们可以通过字面量的形式创建一个新的数组 `new Array()`;

    ```js learn01
    // 01
    let example = new Array(3);
    console.log(example, example[0]); //(3) [empty × 3]length: 3__proto__: Array(0) undefined
    let example2 = new Array(3, "1");
    console.log(example2); // [3, '1']
    ```

    当传入的参数只有一个数字的时候，这个数字将会成为数组的长度，数组将会使用 undefined 占位；

    ES6 提供了 `Array.of` 就是为了解决这个奇怪的问题

    ```js
    let example3 = Array.of(1);
    console.log(example3); // 1
    ```

    当然，创建数组的时候并不建议使用字面量的方式进行创建

2. Array.from

    如何将一个类数组转换成为一个数组;

    通常我们会利用数组的 `slice` 的方法来完成；

    ```js
    // 02

    let example = function() {
        console.log(arguments); // { '0': 1, '1': 2, '2': 3, '3': 4, '4': 5 }
        console.log(Array.prototype.slice.call(arguments)); // [ 1, 2, 3, 4, 5 ]
    };

    example(1, 2, 3, 4, 5);
    ```

    ES6 同样提供了更加简便的方式来实现这个需求

    ```js
    let example2 = function() {
        console.log(arguments); // { '0': 1, '1': 2, '2': 3, '3': 4, '4': 5 }
        console.log(Array.from(arguments)); // [ 1, 2, 3, 4, 5 ]
    };

    example2(1, 2, 3, 4, 5);
    ```

    `Array.from` 还可以转换可迭代对象；在 `Array.from` 中还有其余参数可以使用

    ```js
    let example2 = function() {
        console.log(arguments); // { '0': 1, '1': 2, '2': 3, '3': 4, '4': 5 }
        console.log(Array.from(arguments)); // [ 1, 2, 3, 4, 5 ]
        console.log(
            Array.from(
                arguments,
                function(value, index) {
                    console.log(this); // [Function: example2]
                    return value + "已经修改";
                },
                example2
            )
        ); // [ '1已经修改', '2已经修改', '3已经修改', '4已经修改', '5已经修改' ]
    };

    example2(1, 2, 3, 4, 5);
    ```

### Array 示例对象新增方法

1. find && findIndex

    ```js
    // 03

    let example = [1, 2, 1, 124, 112, 12, 245, 121, 31];

    let result = example.find(value => value > 100);
    let result2 = example.findIndex(value => value > 100);
    console.log(result, result2); // 124 3
    ```

    如果没有满足条件的将会返回 `undefined` 并且都可以接受第 2 个参数，表示执行的上下文

    如果希望查找一个确定值得位置，建议使用 `indexOf || lastIndexOf`

2. fill

    `array.file(value:numbel, start?:number, end?:number)` 用于填充数组

    ```js
    // 04
    let example = [1, 2, 3, 4, 5, 7, 8];

    console.log(example.fill("fill", 3, 5)); // [ 1, 2, 3, 'fill', 'fill', 7, 8 ]
    console.log(example); // [ 1, 2, 3, 'fill', 'fill', 7, 8 ]
    ```

    `start` 和 `end` 可以接受负值；

3. copyWithin

    类似于 `fill`

    ```js
    // 05
    let example = ["a", "b", "c", "X", 1, 2, 3, 4];

    // 从 第4个的位置开始，将 0 - 3 位置的值，对剩余的进行重写
    console.log(example.copyWithin(4, 0, 3)); // [ 'a', 'b', 'c', 'X', 'a', 'b', 'c', 4 ]
    ```

    同样接受负值

---

## 定型数组

> 没懂--标记

定型数组严格来说并不是数组，不继承自 Array ，但是他们确实看起来像是数组；定型数组中的值属于 8 中不同数值数据类型中的一个，它们是基于 ArrayBuffer 对象创建的，用于表示一个或者多个数组底层的数位。按位运算符更适合用定型数组来进行操作，因为其不会像 JavaScript 数字类型的操作那样将值在多种格式间反复转换；

---

{% img '/xmind/ES6/ES6基础-数组.png' %}
