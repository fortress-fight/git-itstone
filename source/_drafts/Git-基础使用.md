---
title: Git-基础使用
tags:
    - git
folder:
    - Git
category:
    - git
date: 2018-09-05 12:39:29
---

---

<!-- more -->

## Git-基础使用

Git 的基础使用包含：

-   初始化仓库
-   开始/停止跟踪（track）文件
-   暂存（stage）文件
-   提交（commit）文件
-   忽略指定文件
-   撤销错误操作
-   浏览项目历史版本
-   比较不同提交之间的差异
-   推送到远程仓库
-   从远程仓库拉取

## 初始化仓库

初始化仓库有两种形式：1. 从现有目录中初始化仓库 2. 从现有仓库中克隆

### 从现有目录中初始化仓库

在项目目录下运行：

-   `git init`
    改命令会初始化 git 仓库，在目录中生成一个 `.git` 的子目录，这个子目录中包含有你初始化的 Git 仓库中的必须要的文件。

### 从现有仓库中克隆

如果需要克隆远程现有的仓库：

-   `git clone <url> [<String|fileName>]`

    url -- git 远程仓库地址
    fileName -- 如果没有将会引用仓库名称作为目录名

### 文件的状态

本地目录中的文件只存在两种状态：1. 以跟踪（纳入版本控制中的文件）2. 未跟踪（未纳入版本控制中的文件）

以跟踪又可以划分为:

-   暂存
-   已修改
-   已提交

编辑过文件之后，由于自上次提交后你对它们做了修改，Git 就将它们标记未已修改的文件。

-   `git status`
    检测文件处于什么状态，`Untricked file` 为未追踪的文件列表；`Changes to be committed` 为已暂存但是未提交的文件列表；`Changes not staged for commit` 为已经追踪并且文件已经修改的文件列表

    如果希望状态输出简单一些可以使用：`git status -s`

    `??` 表示文件未跟踪
    `A` 表示文件已暂存
    `M` 左表示文件已修改并暂存 右表示已修改但是未暂存
    ``

-   `git add <fileName>`
    开始追踪文件文件，`git add .` 将会对所有文件进行跟踪

-   `git commit`
    将暂存区内的文件提交到提交区域（将会打开文本编辑用于输入提交说明），文件状态变为已提交，建议在提交前，查看 `status`；
    如果希望快速提交可以：`git commit -m <String|Message>`

    `git commit -v` 可以将修改的信息放到文本中作为提示

    提交后它会告诉你，当前是在哪个分支（master）提交的，本次提交的完整 SHA-1 校验和是什么（463dc4f），以及在本次提交中，有多少文件修订过，多少行添加和删改过。

    ```bash
        [master 04da3f4] commit project
        1 file changed, 3 insertions(+)
    ```

    `git commit -a` Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤：

### 忽略文件

`.gitignore` 我们可以在根目录下创建文件 `.gitignore` 用于表示忽略规则

规则：

1.  `*.[oa]` 忽略以 o 或者 a 结尾的文件
2.  空行和 `#` 开头的行都会被忽略
3.  匹配模式可以以（/）开头防止递归。
4.  匹配模式可以以（/）结尾指定目录。
5.  要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号（\_）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。 使用两个星号（\_) 表示匹配任意中间目录，比如`a/**/z` 可以匹配 a/z, a/b/z 或 `a/b/c/z`等。

### 文件修改了什么

如果你想知道已追踪的文件修改了什么，可以使用 `git diff`

1.  比较本地与暂存区之前的不同 -- `git diff`
2.  比较暂存区文件在提交的时候将会添加在提交里的内容 -- `git diff --staged` | `git diff --cached`

### 文件变化

1.  删除

    实现 git 能操作的是已经追踪的文件：

    -   `git rm`
        该命令用于删除 git 的文件跟踪;

        先在本地进行删除，然后使用命令 `git rm`，然后提交 `git commit`，这样就解除了文件的跟踪
        假如我们存在已经跟踪文件 `del.md`，如果该文件已经在暂存区中需要使用强制删除 `git rm -f del.md` 这样会在接触跟踪的同时，删除本地文件。如果希望保留本地文件可以使用 `git rm --cached del.md`;

    -   因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开。在使用 \* 的时候需要 `\` 转义

2.  移动/重命名

    git 不会记录文件移动，如果在本地移动文件，相当于删除了旧文件并添加了新的文件，所以需要使用命令：

    -   `git mv <filename> <filename>`
        相当于：
        `mv <filename> <filename>`
        `git rm <filename>`
        `git add <filename>`
